#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "playfair.h"
#include "common.h"

typedef enum {	
	NONE = 0,
	SAME_ROW = 1,
	SAME_COL = 2
} pf_rel;

// This matrix represents the lookup relations for a typical playfair cipher.
// For two letters A and B, relation[A][B] is the relation between A and B 
// in the playfair table.
int relation[27][27] = 
	{{0,2,0,0,0,1,0,2,0,0,0,1,0,0,0,1,2,0,0,0,0,0,2,0,1,0},
	{2,0,1,1,0,0,0,2,1,0,0,0,0,0,0,0,2,1,0,0,0,0,2,0,0,0},
	{0,1,0,1,0,0,0,0,1,0,2,0,0,0,0,0,0,1,2,0,0,0,0,2,2,0},
	{0,1,1,0,0,2,0,0,1,0,0,0,2,0,0,0,0,1,0,2,0,0,0,0,0,2},
	{0,0,0,0,0,0,1,1,2,0,1,0,1,2,0,2,0,0,0,0,2,0,0,0,0,0},
	{1,0,0,2,0,0,0,0,0,0,0,1,2,0,0,1,0,0,0,2,0,0,0,0,1,2},
	{0,0,0,0,1,0,0,1,0,0,1,2,1,0,2,0,0,2,0,0,0,2,0,0,0,0},
	{2,2,0,0,1,0,1,0,0,0,1,0,1,0,0,0,2,0,0,0,0,0,2,0,0,0},
	{0,1,1,1,2,0,0,0,0,0,0,0,0,2,0,2,0,1,0,0,2,0,0,0,0,0},
	{0,0,2,0,1,0,1,1,0,0,1,0,1,0,0,0,0,0,2,0,0,0,0,2,2,0},
	{1,0,0,0,0,1,2,0,0,0,0,1,0,0,2,1,0,2,0,0,0,2,0,0,1,0},
	{0,0,0,2,1,2,1,1,0,0,1,0,1,0,0,0,0,0,0,2,0,0,0,0,0,2},
	{0,0,0,0,2,0,0,0,2,0,0,0,0,1,1,2,1,0,1,1,2,0,0,0,0,0},
	{0,0,0,0,0,0,2,0,0,0,0,2,0,0,1,0,1,2,1,1,0,2,0,0,0,0},
	{1,0,0,0,2,1,0,0,2,0,0,1,0,2,0,1,0,0,0,0,2,0,0,0,1,0},
	{2,2,0,0,0,0,0,2,0,0,0,0,0,1,1,0,1,0,1,1,0,0,2,0,0,0},
	{0,1,1,1,0,0,2,0,1,0,0,2,0,0,2,0,0,1,0,0,0,2,0,0,0,0},
	{0,0,2,0,0,0,0,0,0,0,2,0,0,1,1,0,1,0,1,1,0,0,0,2,2,0},
	{0,0,0,2,0,2,0,0,0,0,0,0,2,1,1,0,1,0,0,1,0,0,0,0,0,2},
	{0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,2,0,0,0,0,1,1,1,1,0,1},
	{0,0,0,0,0,0,2,0,0,0,0,2,0,0,2,0,0,2,0,0,0,1,1,1,0,1},
	{2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,1,0,1,1,0,1},
	{0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,1,1,0,1,2,1},
	{1,0,2,0,0,1,0,0,0,0,2,1,0,0,0,1,0,0,2,0,0,0,0,0,1,0},
	{0,0,0,2,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,1,1,1,1,0,1},
	{1,0,0,0,2,1,0,0,2,0,0,1,0,2,0,1,0,0,0,0,2,0,0,0,1,0}};

// This matrix stores the indecies for every letter in the playfair table
char indx[27][2] = {{0,2},{1,2},{1,3},
		{1,4},{2,0},{0,4},
		{2,1},{2,2},{1,0},
		{2,3},{0,1},{2,4},
		{3,0},{3,1},{0,0},
		{3,2},{1,1},{3,3},
		{3,4},{4,0},{4,1},
		{4,2},{4,3},{0,3},
		{4,4}};

// The playfair table
char M[5][5] = {{'P','L','A','Y','F'},
	    	{'I','R','B','C','D'},
	    	{'E','G','H','K','M'},
	    	{'N','O','Q','S','T'},
	    	{'U','V','W','X','Z'}};

pf_rel find_relations(char a, char b) {
	return relation[a-'A'][b-'A'];
}

void encrypt_playfair(char* message, int message_length) {

}

void decrypt_playfair(char* message, int message_length) {

}

void playfair() {

}
